<?xml version="1.0" ?>
<lsc xmlns="http://lsc-project.org/XSD/lsc-core-2.1.xsd" xmlns:james="http://lsc-project.org/XSD/lsc-james0-plugin-1.0.xsd" revision="0">
  <connections>
    <ldapConnection>
      <name>openldap</name>
      <url>ldap://ldap:389/dc=james,dc=org</url>
      <username>cn=admin,dc=james,dc=org</username>
      <password>mysecretpassword</password>
      <authentication>SIMPLE</authentication>
      <referral>THROW</referral>
      <derefAliases>NEVER</derefAliases>
      <version>VERSION_3</version>
      <pageSize>-1</pageSize>
      <factory>com.sun.jndi.ldap.LdapCtxFactory</factory>
      <tlsActivated>false</tlsActivated>
      <saslMutualAuthentication>false</saslMutualAuthentication>
    </ldapConnection>
    <pluginConnection implementationClass="org.lsc.plugins.connectors.james.generated.jamesConnectionType">
      <name>james</name>
      <url>http://james:8000/</url>
      <username>admin@james.org</username>
      <password>eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZG1pbkBqYW1lcy5vcmciLCJhZG1pbiI6dHJ1ZSwiaWF0IjoxNjc4MTc5MzQ1fQ.YFPNcm0xqP2oJTSICnBU0_5Mwl9rkCB6BVCKbL6_FHXl8IdMJYRUvKWSY1DyxAeMGWz0_TaqdhqYGUVMkTGVXQutkcbrRO23Xg8fy6OMDQdeTUEuFqHq3Upm1AbHjjzEUtiDNKMsYC-Rm1qx5rv2YApTrm92IiG6QJvCdXW5S_0SEReWODOjrM2Pkfgo8zpBR4O8jUjsZnIsiO9tsK8CZn9LZwxu6d1vcG21CjoooWp6MljXwPCmJ7UfIEeyKK6uFzUJp7IxMPS--oOYrbdh6dcEW68WWQCyIAhbsZVDBw2Npcu-4GY7FGN5CEakR4ZKNS-m9AaGsbPj9FtSJb_46B2nO6O4Hxkpg99vRyx7DKUZ7BNaL4FgULv_58IZ4nGNntIKgKjB3d7M3gjFX449I6njq_S-H_IwteDCmM9Rgy-otD9MlbAjEsIYa-W--rX85AnDH2Y4tq0C-C9JL-r19Wyc44h5hlXTTH6j6u1j-pBuOxmcBSWD_eX0MSJiISzyEKvuZrbueQYgYMOiWqfUUg_rWw48p7nUUfzI8ksMPx8MZpo-Wu-z6C_xeu6Mme-55VfAvhUJSPm0RYUWj0V1QjeiToHNvjcAHUsfLXHUL6WME-wogSnS20OQ3ZNTQXaP0CnbohJxhRpnu2_LSuXfBHsZeUNVxsVUI96OShbiUZE</password>
    </pluginConnection>
  </connections>
  <audits/>
  <tasks>
    <task>
      <name>userSynchronization</name>
      <bean>org.lsc.beans.SimpleBean</bean>
      <ldapSourceService>
        <name>openldap-user</name>
        <connection reference="openldap"/>
        <baseDn>ou=people,dc=james,dc=org</baseDn>
        <pivotAttributes>
          <string>mail</string>
        </pivotAttributes>
        <fetchedAttributes>
          <string>mail</string>
        </fetchedAttributes>
        <getAllFilter>(&amp;(objectClass=inetOrgPerson)(mail=*))</getAllFilter>
        <getOneFilter>(&amp;(objectClass=inetOrgPerson)(mail={mail}))</getOneFilter>
        <cleanFilter>(&amp;(objectClass=inetOrgPerson)(mail={email}))</cleanFilter>
      </ldapSourceService>
      <pluginDestinationService implementationClass="org.lsc.plugins.connectors.james.JamesUserDstService">
        <name>james-user-dst</name>
        <connection reference="james" />
        <james:jamesUsersService>
          <name>james-user-service-dst</name>
          <connection reference="james" />
          <james:writableAttributes>
            <string>mail</string>
          </james:writableAttributes>
        </james:jamesUsersService>
      </pluginDestinationService>
      <propertiesBasedSyncOptions>
        <mainIdentifier>srcBean.getDatasetFirstValueById('mail');</mainIdentifier>
        <defaultDelimiter>;</defaultDelimiter>
        <defaultPolicy>FORCE</defaultPolicy>
        <conditions>
          <create>true</create>
          <update>false</update>
          <delete>true</delete>
          <changeId>false</changeId>
        </conditions>
        <dataset>
          <name>email</name>
          <forceValues>
            <string>srcBean.getDatasetFirstValueById("mail")</string>
          </forceValues>
        </dataset>
      </propertiesBasedSyncOptions>
    </task>
  </tasks>
</lsc>
